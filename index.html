<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apple orchard</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- ì¢Œì¸¡ ìƒë‹¨ About -->
  <div class="about-trigger">?</div>
  <div class="about-text">
    <p>ì—´ë§¤ë¥¼ ë”°ë³´ì„¸ìš”.</p>
  </div>

  <!-- ì¤‘ì•™ ë¬´ëŒ€ -->
  <main class="stage">
    <section class="frame">
      <img class="photo" src="apple_tree_2.jpg" alt="Apple Tree" />

      <!-- ì‚¬ê³¼(ê°ê° ë‹¤ë¥¸ í…ìŠ¤íŠ¸/ë§í¬) -->
      <div class="apple a1"
           data-title="ì‘ì—… 1"
           data-desc="ì„¤ëª…"
           data-href="https://kim-heekyung.github.io/bio_on_table/"
           data-link="Bio on table">ğŸ</div>

      <div class="apple a2"
           data-title="ì‘ì—… 2"
           data-desc="ì„¤ëª…."
           data-href="https://kim-heekyung.github.io/my_sweet_little_kitty"
           data-link="My sweet little kitty">ğŸ</div>

      <div class="apple a3"
           data-title="ê¸°íƒ€"
           data-desc="ì„¤ëª…"
           data-href="https://kim-heekyung.github.io/writing"
           data-link="Writing">ğŸ</div>

      <div class="apple a4"
           data-title="ê¸°íƒ€"
           data-desc="ê¸°íƒ€ ì„¤ëª…ë¬¸. ë§í¬ ë¬¸êµ¬ë„ ë°”ê¿€ ìˆ˜ ìˆì–´."
           data-href="https://kim-heekyung.github.io/answering_machine"
           data-link="super TMI">ğŸ</div>

      <!-- ì‚¬ê³¼ í´ë¦­ ì‹œ, í•´ë‹¹ ì‚¬ê³¼ ìœ„ì¹˜ì— ëœ¨ëŠ” ì‘ì€ ë¼ë²¨(ë§í¬) -->
      <a class="apple-pop" id="applePop" href="#" target="_blank" rel="noopener">open</a>

      <img class="ladder-fixed" src="ladder.png" alt="ladder" />

      <div class="ladder-label">
        <button class="pill-label" type="button"> ê¹€í¬ê²½ì˜ í•¸ë“œë©”ì´ë“œì›¹ ëª¨ìŒ  </button>
      </div>

    </section>
  </main>




  <script>
    // ì¢Œì¸¡ ìƒë‹¨ About í† ê¸€
    const trigger = document.querySelector('.about-trigger');
    const text = document.querySelector('.about-text');

    trigger.addEventListener('click', () => {
      text.classList.toggle('active');
    });

    // ì‚¬ê³¼ í´ë¦­ -> ì „ì²´(ì‚¬ì§„+ì‚¬ê³¼) ë¸”ëŸ¬ + ì‚¬ê³¼ ìœ„ì¹˜ì— ì‘ì€ ë¼ë²¨(ë§í¬) í‘œì‹œ
    const frame = document.querySelector('.frame');
    const pop = document.getElementById('applePop');

    function openApplePop(apple) {
      // ë¸”ëŸ¬ ON (ì‚¬ì§„ + ì‚¬ê³¼)
      frame.classList.add('is-overlay-open');

      // ë¼ë²¨ í…ìŠ¤íŠ¸/ë§í¬ ì„¸íŒ…
      pop.textContent = apple.dataset.link || 'open';
      pop.href = apple.dataset.href || '#';

      // í´ë¦­í•œ ì‚¬ê³¼ ìœ„ì¹˜ì— ë¼ë²¨ ë°°ì¹˜
      const x = apple.offsetLeft;
      const y = apple.offsetTop;

      // ì‚¬ê³¼ì˜ ì˜¤ë¥¸ìª½ ìœ„ì¯¤(ì›í•˜ë©´ ìˆ«ìë§Œ ì¡°ì ˆ)
      pop.style.left = (x + 16) + 'px';
      pop.style.top  = (y - 14) + 'px';

      pop.classList.add('active');
    }

    function closeApplePop() {
      frame.classList.remove('is-overlay-open');
      pop.classList.remove('active');
    }

    // ì‚¬ê³¼ í´ë¦­ -> ë¼ë²¨ ì—´ê¸°
    document.querySelectorAll('.apple').forEach((apple) => {
      apple.addEventListener('click', (e) => {
        e.stopPropagation();
        openApplePop(apple);
      });
    });

    // í™”ë©´ ì•„ë¬´ë°ë‚˜ í´ë¦­í•˜ë©´ ë‹«ê¸° (ë¼ë²¨ í´ë¦­ì€ ì´ë™ì´ë¯€ë¡œ ì œì™¸)
    document.addEventListener('click', (e) => {
      if (e.target === pop) return;
      closeApplePop();
    });

    // ESCë¡œ ë‹«ê¸°
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeApplePop();
    });

      const pill = document.querySelector('.pill-label');

    if (pill) {
      const text = pill.textContent.trim();
      pill.textContent = "";

      [...text].forEach((char) => {
        const span = document.createElement("span");
        span.classList.add("char");
        span.textContent = char === " " ? "\u00A0" : char;

        // ğŸ² ëœë¤ ìœ„ì•„ë˜ ì´ë™ (-3px ~ 3px)
        const y = (Math.random() * 6 - 3).toFixed(2);

        // ğŸ² ëœë¤ íšŒì „ (-3deg ~ 3deg)
        const r = (Math.random() * 6 - 3).toFixed(2);

        span.style.transform = `translateY(${y}px) rotate(${r}deg)`;

        pill.appendChild(span);
      });
    }
  </script>
</body>
</html>